<div class="container">
  <!--  begin slider  -->
  <%= render partial: 'slider_news', object: @featured_posts %>
  <!--  END slider  -->

  <!--  begin last news  -->
  <%= render partial: 'last_news' %>
  <!--  END last news  -->

  <!--  begin news main  -->
  <div class="row">

    <!--  begin popular-news  -->
    <%= render partial: 'popular_news' %>
    <!--  END popular-news  -->

    <% if !@posts.empty? %>
    <div class="news-items small">
      <div class="news-item-row clearfix">
      <% @posts.first(2).each_with_index do |post, index| %>
          <%= link_to read_post_path(post), class: "news-item #{size(index + 1)}" do %>
            <%= image_tag post.photo.url %>
                    <span class="news-descrip">
                      <% if size(index + 1) == 'big' %>
                        <%= truncate post.title, length: 150 %>
                      <% else %>
                        <%= truncate post.title, length: 70 %>
                      <% end %>
                             <span class="read-more">Читать далее...</span>
                    </span>
          <% end %>
      <% end %>
      </div>

      <div class="news-item-row clearfix">
        <% @posts.offset(2).first(3).each_with_index do |post, index| %>
            <%= link_to read_post_path(post), class: "news-item #{size(index + 3)}" do %>
                <%= image_tag post.photo.url %>
                <span class="news-descrip">
                      <% if size(index + 1) == 'big' %>
                        <%= truncate post.title, length: 150 %>
                      <% else %>
                        <%= truncate post.title, length: 70 %>
                      <% end %>
                  <span class="read-more">Читать далее...</span>
                    </span>
            <% end %>
        <% end %>
      </div>
    </div>

    <div class="news-items">
    <% off = 5
       until @posts.offset(off).empty? do %>
          <div class="news-item-row clearfix">
            <% @posts.offset(off).first(2).each_with_index do |post, index| %>
                  <%= link_to read_post_path(post), class: "news-item #{size(index + 1)}" do %>
                    <%= image_tag post.photo.url %>
                    <span class="news-descrip">
                      <% if size(index + 1) == 'big' %>
                        <%= truncate post.title, length: 190 %>
                      <% else %>
                        <%= truncate post.title, length: 75 %>
                      <% end %>
                    </span>
                  <% end %>
            <% end %>
          </div>

          <div class="news-item-row clearfix">
            <% @posts.offset(off + 2).first(3).each_with_index do |post, index| %>
                <%= link_to read_post_path(post), class: "news-item #{size(index + 3)}" do %>
                    <%= image_tag post.photo.url %>
                    <span class="news-descrip">
                      <% if size(index + 1) == 'big' %>
                        <%= truncate post.title, length: 190 %>
                      <% else %>
                        <%= truncate post.title, length: 75 %>
                      <% end %>
                    </span>
                <% end %>
            <% end
            off += 5
            %>
          </div>
    <% end %>
    </div>
    <% else %>
        <h2 class="">На данный момент новостей на главной странице нет.
          Пожалуйста, воспользуйтесь архивом или поиском для
        обращения к старым материалам.</h2>
    <% end %>

  </div>
  <!--  END news main  -->

</div>
